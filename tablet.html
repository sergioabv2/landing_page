<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <link rel="stylesheet" href="https://unpkg.com/swiper/swiper-bundle.min.css"/>
 <link href="https://cdn.jsdelivr.net/npm/remixicon@3.7.0/fonts/remixicon.css" rel="stylesheet"/>
  <link href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/css/bootstrap.min.css" rel="stylesheet">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/js/bootstrap.min.js"></script>      
  <script src="https://unpkg.com/swiper/swiper-bundle.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/angular.js/1.8.2/angular.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
</head>

<style>
  /* === Google Font Import - Poppins === */
@import url('https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap');

*{
  margin: 0;
  padding: 0;
  box-sizing: border-box;
  font-family: 'Poppins', sans-serif;
}



body{
  height: 100vh;
  display: flex;
  align-items: center;
  justify-content: center;
  background: #f2f2f2;
}

section{
  position: absolute;  
  /*height: 450px;
  width: 1075px;
  display: flex;
  align-items: center;*/
}

.swiper{
  width: 650px;
    height: 100%;
  margin-bottom: 50px;
}

.card{
  position: relative;
  background: #fff;
  border-radius: 20px;
  margin: 20px 0;
  box-shadow: 0 5px 10px rgba(0, 0, 0, 0.1);
}

.card::before{
  content: "";
  position: absolute;
  height: 40%;
  width: 100%;
  background: #7d2ae8;
  border-radius: 20px 20px 0 0;
}

.card .card-content{
  display: flex;
  flex-direction: column;
  align-items: center;
  padding: 30px;
  position: relative;
  z-index: 100;
}

section .card .image{
  height: 140px;
  width: 140px;
  border-radius: 50%;
  padding: 3px;
  background: #7d2ae8;
}

section .card .image img{
  height: 100%;
  width: 100%;
  object-fit: cover;
  border-radius: 50%;
  border: 3px solid #fff;
}

.card .media-icons{
  position: absolute;
  top: 10px;
  right: 20px;
  display: flex;
  flex-direction: column;
  align-items: center;
}

.card .media-icons i{
  color: #fff;
  opacity: 0.6;
  margin-top: 10px;
  transition: all 0.3s ease;
  cursor: pointer;
}



.card .media-icons i:hover{
  opacity: 1;
}

.card .name-profession{
  display: flex;
  flex-direction: column;
  align-items: center;
  margin-top: 10px;
  color: ;
} 

.name-profession .name{
  font-size: 20px;
  font-weight: 600;
}

.name-profession .profession{
  font-size:15px;
  font-weight: 500;
}



.card .button{
  width: 100%;
  display: flex;
  justify-content: space-around;
  margin-top: 20px;
}

.card .button button{
  background: #7d2ae8;
  outline: none;
  border: none;
  color: #fff;
  padding: 8px 22px;
  border-radius: 20px;
  font-size: 14px;
  transition: all 0.3s ease;
  cursor: pointer;
}

.button button:hover{
  background: #6616d0;
}

.swiper-pagination{
  position: absolute;
}

.swiper-pagination-bullet{
  height: 7px;
  width: 26px;
  border-radius: 25px;
  background: #7d2ae8;
}

.swiper-button-next, .swiper-button-prev{
  opacity: 0.7;
  color: #7d2ae8;
  transition: all 0.3s ease;
}
.swiper-button-next:hover, .swiper-button-prev:hover{
  opacity: 1;
  color: #7d2ae8;
}

</style>

  <body ng-app="studentsApp" ng-controller="Controller1">

    
    <section class="userSelect" ng-hide="showUserInterface">
    
    <div class="swiper mySwiper container" >
      <div class="swiper-wrapper content">

        <div class="swiper-slide card" ng-repeat="user in filteredStudents">
          <div class="card-content">
            <div class="image">
              <img src="https://blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEjxivAs4UknzmDfLBXGMxQkayiZDhR2ftB4jcIV7LEnIEStiUyMygioZnbLXCAND-I_xWQpVp0jv-dv9NVNbuKn4sNpXYtLIJk2-IOdWQNpC2Ldapnljifu0pnQqAWU848Ja4lT9ugQex-nwECEh3a96GXwiRXlnGEE6FFF_tKm66IGe3fzmLaVIoNL/s1600/img_avatar.png" alt="" class="card-img">
            </div>


            <div class="name-profession">
              <span class="name">{{user.nameshort}}</span>
              <span class="profession">{{user.level}}</span> <span style="font-size: 13px;">{{user.block}} </span>
            </div>
            

            <div class="button">
              <button class="aboutMe" ng-click="login(user)">Iniciar sesión</button>
            </div>
          </div>
        </div>
        
        
          <div class="swiper-slide card">
          <div class="card-content">
            <div class="image">
              <img src="https://blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEjxivAs4UknzmDfLBXGMxQkayiZDhR2ftB4jcIV7LEnIEStiUyMygioZnbLXCAND-I_xWQpVp0jv-dv9NVNbuKn4sNpXYtLIJk2-IOdWQNpC2Ldapnljifu0pnQqAWU848Ja4lT9ugQex-nwECEh3a96GXwiRXlnGEE6FFF_tKm66IGe3fzmLaVIoNL/s1600/img_avatar.png" alt="" class="card-img">
            </div>
            <div class="name-profession">
              <span class="name">Seleccionar usuario</span>
              <span class="profession"></span> 
            </div>
        
<select ng-model="selectedStudent" ng-options="student as student.name for student in userData">
  <option ></option>
 
  </select>
              <div class="button">
              <button class="aboutMe" ng-click="login(selectedStudent)">Iniciar sesión</button>
            </div>
            </div>
          </div>
    
 
      </div>
    </div>

      <div class="swiper-pagination"></div>
  </section>
    
    
    
     <section class="userInterface" ng-show="showUserInterface" class="fade-in">
     <div style="margin-left: 640px"> 
       {{student.name}}
       <button class="aboutMe" ng-click="logout()">Regresar</button>
       <div>
    </section>
     
    
</body>

  <!-- Swiper JS -->


  <script>
    
 angular.module('studentsApp', [])
 .controller('Controller1', ['$http', '$scope', '$interval', function($http, $scope, $interval) {
  $scope.userData = {};
  $scope.studentData = {};
  var swiperInstance = null;
   
 function obtenerDatos() {
  $http({
    method: 'GET',
    url: 'https://script.google.com/macros/s/AKfycbxXD35z5FSf_m_dwBt5qcBwWq2L7IDc7KBrYGfix6hUa4kvJ1TFpjU82NltFXezUroGgQ/exec',
    headers: {
      'Content-Type': 'application/json',
      'Accept': 'application/json'
    }
  }).then(function(response) {
      $scope.userData = response.data; 
    $scope.filterByHour();
    
    if (swiperInstance) {
     swiperInstance.destroy(true, true); 
            }
    
    swiperInstance = new Swiper(".mySwiper", {
    effect: "coverflow",
  grabCursor: true,
  centeredSlides: true,
  slidesPerView: 2,
  spaceBetween: 30,
  coverflowEffect: {
    rotate: 0,
    stretch: 50,
    depth: 120,
    modifier: 2,
    slideShadows: true
  },
      pagination: {
        el: ".swiper-pagination",
        clickable: true,
      }
    });
    
  });
   
     
 }
   
   $scope.alertName = function(student) {
    alert(student.name);
  }
   
   
    $scope.getCurrentDay = function() {
    var days = ['Domingo', 'Lunes', 'Martes', 'Miércoles', 'Jueves', 'Viernes', 'Sábado'];
    var now = new Date();
    return days[now.getDay()];
  };

  $scope.getCurrentHour = function() {
    var now = new Date();
    now.setMinutes(now.getMinutes() + 15);
    var hours = now.getHours();
    //var formattedHours = (hours % 12) || 12;
    return hours
  };
  

  $scope.filteredStudents = [];
  
  $scope.filterByHour = function() {
    $scope.filteredStudents = $scope.userData.filter(function(user) {
      return ((user.classtime[0].split(" ")[0] === $scope.getCurrentDay() && parseInt(user.classtime[0].split(" ")[2].split(":")[0]) === $scope.getCurrentHour()) || (user.classtime[1].split(" ")[0] === $scope.getCurrentDay() && parseInt(user.classtime[1].split(" ")[2].split(":")[0]) === $scope.getCurrentHour()));
    });

  };
   
   
   
   $scope.showUserInterface = false;

    $scope.login = function(user) {
      $scope.student = user
      $scope.showUserInterface = true;
       $('.userInterface').fadeIn('slow', function() {
        $('.userSelect').fadeOut('slow');
    });
    };
   
   $scope.logout = function() {
      $scope.showUserInterface = false;
     $('.userSelect').fadeIn('slow', function() {
        $('.userInterface').fadeOut('slow');
    });
    };
   
   
   
   obtenerDatos();
  $interval(obtenerDatos, 300000);
   

}]);
  </script>
