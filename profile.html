<head>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script> 
 <script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.5.1/js/bootstrap.js"></script>
 <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.1/css/bootstrap.min.css">
  
<link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css" rel="stylesheet">
   <link href="https://cdn.jsdelivr.net/npm/remixicon@4.2.0/fonts/remixicon.css" rel="stylesheet">

<script src="https://cdnjs.cloudflare.com/ajax/libs/angular.js/1.8.2/angular.min.js"></script>
   <script src="https://cdn.WebRTC-Experiment.com/MediaStreamRecorder.js"></script>
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/mediaelement@4.2.16/build/mediaelementplayer.min.css">
<script src="https://cdn.jsdelivr.net/npm/mediaelement@4.2.16/build/mediaelement-and-player.min.js"></script>
</head>


<style>
    body {
    font-family: "Helvetica Neue", Helvetica, Arial, sans-serif ;
}
  
.dashboard-container {
  max-width: 1200px;
  margin: 0 auto;
  padding: 0 15px;
}  

.text-orange {color: #ff8300}
  .text-golden {
         color: orange;
  text-shadow: 0 0 10px orange;
        }
  .text-blue {color: #20a2f1}
  .text-green {color: green}

/*-- Dashboard panel --*/ 
.dashboard-panel {margin: 10px 0 20px; }
.dashboard-panel .panel-header {position: relative; background: #434444; color: #FFF; border-radius: 0.15em;}
.dashboard-panel .panel-header > * {display: block; }
.dashboard-panel .panel-header h4 {margin: 0; padding: 6px; font-size: 18px; }
.dashboard-panel .panel-header h4 i {color: #d8d8d8; }

.dashboard-panel .panel-body {margin-top: 10px; max-height: 225px; border: 1px solid #d8d8d8; overflow-y: auto; }
 
/*-- Datos del usuario --*/
.profile-user-data {padding: 10px 0;}
.profile-user-data > * {float: left;}
 .profile-user-data   .circle {
    border-radius: 100% !important;
    overflow: hidden; 
    width: 95px;
    height: 95px;
   margin-top: 10px;
   margin-right: 10px;
}
.profile-user-data img { margin-right: 10px; max-width: 100px;}
.profile-user-data .main-data {padding: 10px 0 20px; margin-bottom: 15px; width: calc(100% - 115px);}
.profile-user-data .main-data h4 {margin: 0; font-size: 20px; font-weight: }
.profile-user-data .main-data span {font-size: 12px;}

/*-- Números del usuario --*/
.user-stats {padding: 20px 5px; border-top: 3px solid #e6e6e6;}
.user-stats > * {margin: 0;}
.user-stats .achievement-count {font-size: 20px;}
.user-stats .achievement-count i {margin-right: 10px;  font-size: 28px;}
.user-stats .achievement-count span {margin: 0 5px; color: #55565a; opacity: 0.6;}
.user-stats .achievement-count span.acive {font-size: 28px; opacity: 1;}
.user-stats .currency-count li {padding: 2px 0 2px 5px;}
.user-stats .currency-count li span {color: #77777a; font-size: 18px;}
.user-stats .currency-count li i {
  width: 34px; height: 34px;
  padding: 8px 0;
  background: #ff8300;
  border-radius: 50%;
  box-shadow: inset 0 0 0 3px #ff8300, inset 0 0 0 5px rgba(255,255,255,0.4);
  color: #FFF;
  font-size: 19px;
  text-align: center;
  
}

/*-- Últimos logros obtenidos --*/
.user-achievements {padding: 15px 20px 10px; background: #eff3f9;}
.user-achievements h3 {margin: 0 0 20px 0;}
.user-achievements ul li {width: calc(100% /6 - 5px); padding: 3px; vertical-align: middle;}
.user-achievements ul li a {display: block; height: 54px; width: 54px; margin: auto; padding: 8px 0; border: 3px solid #77777a; border-radius: 50%; color: #a5a5a5; font-size: 12px; text-align: center;}
.user-achievements ul li a i {font-size: 31px;}
.user-achievements ul li a:hover,
.user-achievements ul li a:focus {background: rgba(0,0,0,0.08)}
.user-achievements ul li a.see-more {border: none; width: 100%; padding: 10px 0; border-radius: 0; color: #ff6b00; line-height: 0.8}
.user-achievements ul li a.see-more > * {display: block;}
.user-achievements ul li a.see-more span {font-size: 28px; margin-bottom: 5px;}
.user-achievements ul li a.see-more small {display: block; margin-top: 0; font-size: 12px; text-decoration: underline;}
.user-achievements ul li a.see-more:hover,
.user-achievements ul li a.see-more:focus {background: rgba(0,0,0,0.05); text-decoration: none;}


/*-- Registro de actividad --*/
.log-list-container {margin: 0; padding: 15px;}
.log-list-container ul {position: relative; margin: -15px 0; padding: 0; }
.log-list-container ul:before {content: ""; display: block; position: absolute; top: 20px; bottom: 20px; left: 8px; width: 4px; background: #a5a5a5; }
.log-list-container li {display: block; position: relative; padding: 10px 15px 10px 35px; color: #666; font-size: 12px;}
.log-list-container li > * {display: block; }
.log-list-container li:before { display: block; position: absolute; top: 50%; left: -5px; width: 30px; height: 30px; margin-top: -15px; padding: 7px 0; background: silver; border-radius: 50%;  font: normal normal normal 16px/1 FontAwesome; text-align: center; }
.log-list-container li small {opacity: 0.7; }

  @keyframes pulse {
  0% { transform: scale(1); }
  50% { transform: scale(1.18); }
  100% { transform: scale(1); }
}
  

@keyframes ring {
  0% {
    box-shadow: 0 0 0 0 rgba(255, 0, 0, 0.7);
  }
  40% {
    box-shadow: 0 0 0 10px rgba(255, 0, 0, 0);
  }
  80% {
    box-shadow: 0 0 0 10px rgba(255, 0, 0, 0);
  }
  100% {
    box-shadow: 0 0 0 0 rgba(255, 0, 0, 0);
  }
}
  
  @keyframes ringyellow {
   0% {
    box-shadow: 0 0 0 0 rgba(255, 165, 0, 0.7); /* Color naranja */
  }
  40% {
    box-shadow: 0 0 0 10px rgba(255, 165, 0, 0); /* Color naranja */
  }
  80% {
    box-shadow: 0 0 0 10px rgba(255, 165, 0, 0); /* Color naranja */
  }
  100% {
    box-shadow: 0 0 0 0 rgba(255, 165, 0, 0); /* Color naranja */
  }
}

@keyframes animateHeart {
0% {transform: scale(1); } 
5% {transform: scale(1.2); } 
10% {transform: scale(1.1); } 
15% {transform: scale(1.3); } 
50% {transform: scale(1); } 
100% {transform: scale(1); } 
}
 
  @keyframes load {
  0% { transform: rotate(0); }
  100% { transform: rotate(360deg); }
}

  @keyframes rotate-icon {
    0% { transform: rotate(0deg); }
    50% { transform: rotate(180deg); }
    50.01% { transform: rotate(180deg); }
    100% { transform: rotate(360deg); }
}
  

.status-pending:before {
 content: "\f021";
  animation: load 1.5s steps(900, end) infinite;
}
  

  


  
   .status-delayed:before {
  content: "\f071"; /* Example icon for completed status */
     animation: ringyellow 1s infinite;
}
  .status-completed:before {
  content: "\f00c"; /* Example icon for completed status */
    color: green;
}

   .status-error:before {
  content: "\f057"; /* Example icon for completed status */
     color: red;
        animation: ring 1.5s infinite;
}

  .status-default:before {
   content: "\f0e7";
    /*content: "\f11d";*/ 
}
  
  .yticon{
    animation: pulse 1s ease-in-out infinite;
  }
  
  .yticon.no-animation {
  animation: none;
}


/*-- Logros --*/
.achievement-list-panel .panel-body {padding: 0 10px; max-height: 570px;}
.achievement-list-panel .panel-body .list-unstyled li {padding: 10px 0; display: -webkit-box; display: -ms-flexbox; display: flex; -webkit-box-align:center; -ms-flex-align:center; -ms-grid-row-align:center; align-items:center;}
.achievement-list-panel .panel-body .list-unstyled li:not(:last-child) {border-bottom: 1px dashed #cccccc}
.achievement-list-panel .panel-body .list-unstyled li .achievement-icon {-webkit-box-flex: 1;-ms-flex: 1 0 70px; flex: 1 0 70px; margin-right: 15px;}
.achievement-list-panel .panel-body .list-unstyled li .achievement-icon i {display: block; height: 70px; width: 70px; padding: 11px 0; border: 3px solid #cccccc; border-radius: 50%; color: #cccccc; font-size: 40px; text-align: center;}
.achievement-list-panel .panel-body .list-unstyled li .achievement-content {color: #55565a;}
.achievement-list-panel .panel-body .list-unstyled li .achievement-content > * {display: block;}
.achievement-list-panel .panel-body .list-unstyled li .achievement-content strong {font-size: 15px;}
.achievement-list-panel .panel-body .list-unstyled li .achievement-content p {margin: 0; font-size: 14px;}
.achievement-list-panel .panel-body .list-unstyled li .achievement-actions {margin-left: 15px;}
.achievement-list-panel .panel-body .list-unstyled li .achievement-actions a {display: block; color: #55565a; font-size: 18px; white-space: nowrap; }
.achievement-list-panel .panel-body .list-unstyled li .achievement-actions a i {font-size: 21px !important;}

.achievement-list-panel .panel-body .list-unstyled li.completed .achievement-icon i {position: relative; border-color: #ff9e16; color: #ff9e16}
.achievement-list-panel .panel-body .list-unstyled li.completed .achievement-icon i:after {content: "\f00c"; display: block; position: absolute; top: 0px; right: 0px; width: 18px; height: 18px; padding: 3px 0; background: #ff9e16; border-radius: 50%; color: #FFF; font: normal normal normal 13px/1 FontAwesome; text-align: center;}
.achievement-list-panel .panel-body .list-unstyled li.completed .achievement-content strong {color: #ff9e16}
.achievement-list-panel .panel-body .list-unstyled li.completed .achievement-actions a {font-weight: bold; color: #ff9e16}


/*-- Tienda --*/
.store-header {margin-bottom: 15px; padding: 3px 15px; border-bottom: 5px solid #ff9e16;}
.store-header i {margin-right: 10px;}

.store-list-panel .panel-body {max-height: 420px;}
.store-list-panel .panel-body .list-unstyled li {padding: 10px 0; display: -webkit-box; display: -ms-flexbox; display: flex; -webkit-box-align:center; -ms-flex-align:center; -ms-grid-row-align:center; align-items:center;}
.store-list-panel .panel-body .list-unstyled li > * {}
.store-list-panel .panel-body .list-unstyled li .prize-thumbnail {-webkit-box-flex: 0;-ms-flex: 0 0 90px; flex: 0 0 90px; margin-right: 15px;}
.store-list-panel .panel-body .list-unstyled li .prize-thumbnail div {width: 100%; padding-top: 70%; background: center center no-repeat; background-size: cover}
.store-list-panel .panel-body .list-unstyled li .prize-description {-webkit-box-flex: 1;-ms-flex: 1 0 auto; flex: 1 0 auto; margin-right: 15px;}
.store-list-panel .panel-body .list-unstyled li .prize-description > * {display: block; width: 100%;}
.store-list-panel .panel-body .list-unstyled li .prize-description small i {height: 18px; width: 18px; padding: 4px 0; background: rgba(0,0,0,0.7); border-radius: 50%; color: #FFF; text-align: center;}
.store-list-panel .panel-body .list-unstyled li .prize-actions {padding: 10px 0 10px 20px}
.store-list-panel .panel-body .list-unstyled li .prize-actions .btn {padding: 7px 18px; border-radius: 0; background: #dddddd; text-transform: uppercase; border: none;}
.store-list-panel .panel-body .list-unstyled li .prize-actions .btn:hover,
.store-list-panel .panel-body .list-unstyled li .prize-actions .btn:focus {background: #ff9e16; color: #FFF;}


.progress{

  margin-top: 5px;
  margin-bottom: -25px;
}



.documents {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(98px, 1fr));
  grid-auto-rows: 214px;
  grid-gap: 12px;
  height: auto;
  background-color: #FFF;
}

.document {
  display: flex;
  align-items: center;
  justify-content: center;
  margin: 15px 0 0;
  flex-direction: column;
}
.document__img {
  width: 105px;
  height: 136px;

  background-size: cover;
  box-shadow: 0 2px 2px 0 rgba(0, 0, 0, 0.14), 0 3px 1px -2px rgba(0, 0, 0, 0.12), 0 1px 5px 0 rgba(0, 0, 0, 0.2);
  cursor: pointer;
  transition: transform 0.3s ease;
}
.document__img:hover {
  transform: translateY(-4px);
}
.document__title {
  margin: 8px 0 2px;
  color: #777;
}
.document__date {
  font-size: 10px;
}


/*.doc-container {
  display: flex;
  flex-direction: column;
  width: 100%;
  background-color: #fff;
  margin-bottom: 20px;
  -webkit-column-break-inside: avoid;
}*/




.showbox {
  display: flex;
    justify-content: center;
    align-items: center;
    height: 100vh;
}

.loader {
  position: relative;
  margin: 0px auto;
  width: 100px;
}
.loader:before {
  content: "";
  display: block;
  padding-top: 100%;
}

.circular {
  -webkit-animation: rotate 2s linear infinite;
          animation: rotate 2s linear infinite;
  height: 100%;
  transform-origin: center center;
  width: 100%;
  position: absolute;
  top: 0;
  bottom: 0;
  left: 0;
  right: 0;
  margin: auto;
}

.path {
  stroke-dasharray: 1, 200;
  stroke-dashoffset: 0;
  -webkit-animation: dash 1.5s ease-in-out infinite, color 6s ease-in-out infinite;
          animation: dash 1.5s ease-in-out infinite, color 6s ease-in-out infinite;
  stroke-linecap: round;
}

@-webkit-keyframes rotate {
  100% {
    transform: rotate(360deg);
  }
}

@keyframes rotate {
  100% {
    transform: rotate(360deg);
  }
}
@-webkit-keyframes dash {
  0% {
    stroke-dasharray: 1, 200;
    stroke-dashoffset: 0;
  }
  50% {
    stroke-dasharray: 89, 200;
    stroke-dashoffset: -35px;
  }
  100% {
    stroke-dasharray: 89, 200;
    stroke-dashoffset: -124px;
  }
}
@keyframes dash {
  0% {
    stroke-dasharray: 1, 200;
    stroke-dashoffset: 0;
  }
  50% {
    stroke-dasharray: 89, 200;
    stroke-dashoffset: -35px;
  }
  100% {
    stroke-dasharray: 89, 200;
    stroke-dashoffset: -124px;
  }
}
@-webkit-keyframes color {
  100%, 0% {
    stroke: #d62d20;
  }
  40% {
    stroke: #0057e7;
  }
  66% {
    stroke: #008744;
  }
  80%, 90% {
    stroke: #ffa700;
  }
}
@keyframes color {
  100%, 0% {
    stroke: #d62d20;
  }
  40% {
    stroke: #0057e7;
  }
  66% {
    stroke: #008744;
  }
  80%, 90% {
    stroke: #ffa700;
  }
}
  
  
   
.profile-pic {
  width: 100px;
  height: 100px;
  margin-left: -2px;
  border-radius: 50%;
  -o-object-position: center;
     object-position: center;
  -o-object-fit: cover;
     object-fit: cover;
} 
   
.p-image {
  top: 105px;
  left: 20px;
  position: absolute;
  color: #666666;
  transition: all .3s cubic-bezier(.175, .885, .32, 1.275);
}



  
     .drive{
      height: 450px;
    width: 120%;
    margin-left: -25px;
  }
  
  
  .modal-container {
    position: fixed;
    display: table;
    height: 100%;
    width: 100%;
    top: 0;
    left: 0;
    transform: scale(0);
    z-index: 1;
  }

  .modal-container.four {
    z-index: 0;
    transform: scale(1);
  }

  .modal-container.four .modal-background .modal {
    animation: blowUpModal 0.5s cubic-bezier(0.165, 0.84, 0.44, 1) forwards;
  }
  .modal-container.four + body {
    z-index: 1;
    animation: blowUpContent 0.5s cubic-bezier(0.165, 0.84, 0.44, 1) forwards;
  }
  .modal-container.four.out .modal-background .modal {
    animation: blowUpModalTwo 0.5s cubic-bezier(0.165, 0.84, 0.44, 1) forwards;
  }
  .modal-container.four.out + body {
    animation: blowUpContentTwo 0.5s cubic-bezier(0.165, 0.84, 0.44, 1) forwards;
  }

  .modal-container .modal-background {
    display: table-cell;
    background: rgba(0, 0, 0, 0.8);
    text-align: center;
    vertical-align: middle;
  }
  .modal-container .modal-background .modal {
    padding: 50px;
    display: inline-block;
    border-radius: 3px;
    font-weight: 300;
    position: relative;
  }

.close-modal {
    display: block;
    position: absolute;
   top: -30px;
    right: -15px;
    text-decoration: none;
    font-size: 20px;
    font-weight: bold;
    color: #fff;
}

  @keyframes blowUpContent {
    0% {
      transform: scale(1);
      opacity: 1;
    }
    99.9% {
      transform: scale(2);
      opacity: 0;
    }
    100% {
      transform: scale(0);
    }
  }
  @keyframes blowUpContentTwo {
    0% {
      transform: scale(2);
      opacity: 0;
    }
    100% {
      transform: scale(1);
      opacity: 1;
    }
  }
  @keyframes blowUpModal {
    0% {
      transform: scale(0);
    }
    100% {
      transform: scale(1);
    }
  }
  @keyframes blowUpModalTwo {
    0% {
      transform: scale(1);
      opacity: 1;
    }
    100% {
      transform: scale(0);
      opacity: 0;
    }
  }
  
  
 



  
  
  

  .menu-bar {
    position: absolute;
            display: flex;
            justify-content: space-around;
            background-color: black;
            padding: 10px 0;
            list-style: none;
            margin-top: -20px;
    margin-left: 140px;
             border-radius: 10px;
            font-weight: 550;
  box-shadow: 0px 8px 20px -8px rgba(26, 33, 43, 0.5), 0px 4px 12px 0px rgba(26, 33, 43, 0.05), 0px 1px 3px 0px rgba(26, 33, 43, 0.25), 0px 1.5px 0.5px 0px #454D57 inset, 0px -3px 1px 0px rgba(0, 0, 0, 0.5) inset;
        }

        .menu-bar li {
            color: white;
          transition: transform 0.2s;
        }

        .menu-bar a {
            color: white;
            text-decoration: none;
            padding: 10px 20px;
        }

.menu-bar li:hover {
  color: white;
            text-decoration: none;
    transform: scaleX(1.03) scaleY(1.06) translateZ(0);
}

.menu-bar li:active {
   color: white;
   text-decoration: none;
    transform: scale(0.96) translateZ(0);
}

    .menu-bar2 {
      position: absolute;
            display: flex;
            justify-content: space-around;
            background-color: black;
            padding: 10px 0;
            list-style: none;
        margin-top: -130px;
             border-radius: 10px;
            font-weight: 550;
  box-shadow: 0px 8px 20px -8px rgba(26, 33, 43, 0.5), 0px 4px 12px 0px rgba(26, 33, 43, 0.05), 0px 1px 3px 0px rgba(26, 33, 43, 0.25), 0px 1.5px 0.5px 0px #454D57 inset, 0px -3px 1px 0px rgba(0, 0, 0, 0.5) inset;
        }

        .menu-bar2 li {
            color: white;
          transition: transform 0.2s;
        }

        .menu-bar2 a {
            color: white;
            text-decoration: none;
            padding: 10px 20px;
        }

.menu-bar2 li:hover {
  color: white;
            text-decoration: none;
    transform: scaleX(1.03) scaleY(1.06) translateZ(0);
}

.menu-bar2 li:active {
   color: white;
   text-decoration: none;
    transform: scale(0.96) translateZ(0); 
}

.mic-container{
  display: none;
  margin-top: 350px;
  position: absolute;
 background: transparent;

}

.audio-record {
     display: flex;
     align-items: center;
}

.audio-record i {
     color: gray;
     font-size: 50px;
     cursor: pointer;
     padding: 1px;
}
.audio-record span {
  position: absolute;
  color: white;
   text-shadow: 1px 2px 3px black, 0px 2px 5px black, 0px 1px 3px black!important; 
  font-weight: 300;
  font-size: 14px;
  margin-left: -7px;
  margin-top: 70px;
}
 .audio-record input[type=checkbox] {
     position: absolute;
     visibility: hidden;
}
.audio-record input[type=checkbox]:checked ~ label i {
     color: #fff;
     background: black;
     border-radius: 100%;
     animation: shadow-expansion 1.5s infinite;
}
.audio-properties .audio_record-control {
     width: 100%;
     display: flex;
     flex-flow: row nowrap;
}
 .audio-properties .audio_record-control .audio-overwrite {
     flex-grow: 2;
     font-size: 11px;
     font-weight: regular;
     padding-top: 6px;
     text-align: right;
}
.audio-properties .audio_record-control .audio-overwrite > label {
     padding-right: 10px;
}



 .player-bar {
     font-size: 14px;
     font-weight: bold;
     width: 100%;
     display: flex;
     flex-flow: row nowrap;
     margin: 10px 0;
}

 
#recorder2 {
  position: relative;
  width: 3rem;
  height: 3rem;
  border-radius: 3rem; 
  background: red;
  border: 1px solid #f9f9fa33;
  cursor: pointer;
  box-shadow: 0 1px 4px 0 rgba(12, 12, 13, 0.2), 0 0 0 1px rgba(0, 0, 0, 0.15);
  transition: 0.2s ease;
  animation: shadow-expansion 1.5s infinite;
}
#recorder2 #record {
  width: 60%;
  height: 60%;
  top: 20%;
  left: 20%;
  position: absolute;
  transition: inherit;
}

 @keyframes shadow-expansion {
    0% {
    box-shadow: 0 0 0 0 rgba(255, 0, 0, 0.7);
  }
  40% {
    box-shadow: 0 0 0 20px rgba(255, 0, 0, 0);
  }
  80% {
    box-shadow: 0 0 0 20px rgba(255, 0, 0, 0);
  }
  100% {
    box-shadow: 0 0 0 0 rgba(255, 0, 0, 0);
  }
}
 .by {
     font-family: sans-serif;
     position: fixed;
     bottom: 20px;
     text-align: center;
     width: 100%;
     font-size: 10px;
}
 .by a {
     text-decoration: none;
     color: #007bff;
     transition: all 0.5s;
}
 .by a:hover {
     color: #0062cc;
}


#record-audio {

  margin-top: -145px;
    
}



 .save {
     position: relative;
     left: 0px;
     top: -20px;
     z-index: 100;
}






  
  #modal-container2 {
    font-family: Helvetica, sans-serif;
    position: fixed;
    display: table;
    height: 100%;
    width: 100%;
    top: 0;
    left: 0;
    transform: scale(0);
    z-index: 1;
  }

  #modal-container2.four {
    z-index: 0;
    transform: scale(1);
  }

  #modal-container2.four .modal-background .modal-msg {
    animation: blowUpModal 0.5s cubic-bezier(0.165, 0.84, 0.44, 1) forwards;
  }
  #modal-container2.four + body {
    z-index: 1;
    animation: blowUpContent 0.5s cubic-bezier(0.165, 0.84, 0.44, 1) forwards;
  }
  #modal-container2.four.out .modal-background .modal-msg {
    animation: blowUpModalTwo 0.5s cubic-bezier(0.165, 0.84, 0.44, 1) forwards;
  }
  #modal-container2.four.out + body {
    animation: blowUpContentTwo 0.5s cubic-bezier(0.165, 0.84, 0.44, 1) forwards;
  }

  #modal-container2 .modal-background {
    display: table-cell;
    background: rgba(0, 0, 0, 0.8);
    text-align: center;
    vertical-align: middle;
  }
 .modal-background .modal-msg {
    padding: 10px;
    width: 75%;
    display: inline-block;
    border-radius: 3px;
    background: transparent;
    font-weight: 300;
    position: relative;
    max-width: 430px;
  }



  @keyframes blowUpContent {
    0% {
      transform: scale(1);
      opacity: 1;
    }
    99.9% {
      transform: scale(2);
      opacity: 0;
    }
    100% {
      transform: scale(0);
    }
  }
  @keyframes blowUpContentTwo {
    0% {
      transform: scale(2);
      opacity: 0;
    }
    100% {
      transform: scale(1);
      opacity: 1;
    }
  }
  @keyframes blowUpModal {
    0% {
      transform: scale(0);
    }
    100% {
      transform: scale(1);
    }
  }
  @keyframes blowUpModalTwo {
    0% {
      transform: scale(1);
      opacity: 1;
    }
    100% {
      transform: scale(0);
      opacity: 0;
    }
  }

  .modal-hidden .modal-background {
    background: transparent;
  }

.close-video-modal {
    display: block;
    position: absolute;
    left: 0;
    top: -40px;

    text-decoration: none;
    font-size: 20px;
    font-weight: bold;
    color: #fff;
}



 .metronome { 
   position: absolute;
   display: block;
  width: calc(100% - 5em);
  padding: 1em 0.001em 0.5em 1em;   
   margin-top: -50px;
   margin-left: -20px;
   transform: scale(0.8);
  font: inherit;
  line-height: 1;
  overflow: hidden;
   background: black;
  box-shadow: 0px 8px 20px -8px rgba(26, 33, 43, 0.5), 0px 4px 12px 0px rgba(26, 33, 43, 0.05), 0px 1px 3px 0px rgba(26, 33, 43, 0.25), 0px 1.5px 0.5px 0px #454D57 inset, 0px -3px 1px 0px rgba(0, 0, 0, 0.5) inset;
  color: white;
   border-radius: 10px;
  cursor: default;
  z-index: 10;
}

#stop{
  display:none;
}










#dotTarget{
  display:flex;
  margin: auto;
}

.beat{
  width:20px;
  height:30px;
  background:#7d7d7d;
  border-radius:2px;
  margin:0px 5px;
  cursor:pointer;
  transition:.25s;
}

.beat:hover{
  background-color:#57cc65;
}

.active{
  background:#57cc65;
}

.on-temp{
  background:#bfcc57;
  transform:scale(1, 1.5);
}

.box{
  padding:40px;
}

.beat-count{
  text-align:center;
  width:25px;
  border:none;
  background:none;
  font-size:24px;
}

.header-btn{
  font-size:24px;
  border:none;
  padding:5px 10px;
  margin:10px 10px 30px 10px;
  background:#ffffff29;
  cursor:pointer;
  transition:.3s;
}

.button-active{
  background:white;
}

#digitalDisplayContainer{
  display:none;
}

.sign-svg{
  fill:#000000; 
  transform:translate(-480.000000px, -192.000000px);
} 

ul{
   list-style:none;
}



.input-section {
  z-index: 2;
  position: relative;
  width: 100%;
  max-width: 80vw;
  height: 40px;
  margin: 10px auto 0;
  overflow: hidden;
}

.input-section .thin-fill {
  position: absolute;
  top: 50%;
  transform: translateY(-50%);
  left: 0;
  width: 100%;
  height: 3px;
  background: transparent;
  border-radius: 1px;
  z-index: -2;
}

.input-section .thick-fill {
  position: absolute;
  top: 50%;
  transform: translateY(-50%);
  left: 0;
  background: orange;
  border-radius: 1px;
  border: 2px solid white;
  z-index: -1;
  height: 15px;
  width: 29.6%; /* When input value is 147 (default) */
}

.tempoSlider {
  -webkit-appearance: none;
  -moz-appearance: none;
  -ms-appearance: none;
  background: transparent;
  border: none;
  width: 100%;
  height: 100%;
  margin: 0;
}

.tempoSlider:focus {
  outline: none;
}

.tempoSlider::-webkit-slider-runnable-track {
  width: 100%;
  height: 15px;
  cursor: pointer;
  background: transparent;
}

.tempoSlider::-webkit-slider-thumb {
  height: 25px;
  width: 25px;
  border-radius: 2px;
  background: #2d303b;
  border: 1px solid white;
  box-shadow: 0 0 2px rgba(0, 0, 0, 0.2);
  cursor: pointer;
  -webkit-appearance: none;
  margin-top: -5px;
  
}

.tempoSlider::-moz-range-track {
  width: 100%;
  height: 15px;
  cursor: pointer;
  background: transparent;
}

.tempoSlider::-moz-range-thumb {
  height: 30px;
  width: 32px;
  border-radius: 2px;
  border: 1px solid white;
  background: #0ec3cc;
  cursor: pointer;
  -moz-appearance: none;
  margin-top: -11px;
  box-shadow: 0 0 2px rgba(0, 0, 0, 0.2);
}

.tempoSlider::-ms-track {
  width: 100%;
  height: 15px;
  cursor: pointer;
  background: transparent;
}

.tempoSlider::-ms-thumb {
  height: 30px;
  width: 32px;
  border-radius: 2px;
  border: 1px solid white;
  background: #0ec3cc;
  cursor: pointer;
  -ms-appearance: none;
  margin-top: -1px;
  box-shadow: 0 0 2px rgba(0, 0, 0, 0.2);
}

.tempoSlider::-ms-tooltip {
  display: none;
}


.main-btn{
  border: white;
  background: transparent;
  border-radius: 50%; /* Esto hace que el contorno sea circular */
  cursor: pointer;
  font-size: 20px;
  float: right;
  margin-right: 20px;
}











.video-modal,
.video-modal .overlay {
    position: absolute;
    top: 0;
    right: 0;
    bottom: 0;
    left: 0;
    z-index: 3000;
}
.video-modal {
  overflow: hidden;
  position: fixed;
  opacity: 0.0;

  -webkit-transform: translate(500%,0%);
  transform: translate(500%,0%);

  -webkit-transition: -webkit-transform 0s linear 0s;
  transition: transform 0s linear 0s;


  /* using flexbox for vertical centering */

  /* Flexbox display */
  display: -webkit-box;
  display: -webkit-flex;
  display: flex;

  /* Vertical alignment */
  -webkit-box-align: center;
  -moz-box-align: center;
  -ms-flex-align: center;
  -webkit-align-items: center;
  align-items: center;

  -webkit-transform-style: preserve-3d;
  -moz-transform-style: preserve-3d;
  transform-style: preserve-3d;
}
.video-modal .overlay {
  z-index: 0;
  background: rgba(13,1,61,0.82); /* overlay color */

  opacity: 0.0;

  -webkit-transition: opacity 0.2s ease-out 0.05s;
  transition: opacity 0.2s ease-out 0.05s;
}


.video-modal-content {
  position: relative;
  top: auto;
  right: auto;
  bottom: auto;
  left: auto;
  z-index: 1;
  
  margin: 0 auto;

  overflow-y: visible;

  background: #000;
  
  width: calc(100% - 12em);
  height: 0;
  padding-top: calc((100% - 12em) * 0.5625); /* 16:9 calc */
}

/* Scaling to fit within the current Viewport size:
   When viewport aspect ratio is greater than 16:9
   work off the height instead of the width for calc */
 @media (min-aspect-ratio: 16/9) {
  .video-modal-content {
    width: 0;
    height: calc(100vh - 10em);
    padding-top: 0;
    padding-left: calc((100vh - 10em) * 1.7778); /* 16:9 calc */
  }
}

/* Mobile Layout Tweaks - side margins reduced */
@media (max-width: 640px) {
  .video-modal-content {
    width: calc(100% - 1em);
    padding-top: calc((100% - 1em) * 0.5625); /* 16:9 calc */
  }
}

/* modal close button */
.close-video-modal {
  display: block;
    position: absolute;
    left: 0;
    top: -40px;

    text-decoration: none;
    font-size: 20px;
    font-weight: bold;
    color: #fff;
}

/* set the iframe element to stretch to fit its parent element */
iframe#youtube {
  position: absolute;
  top: 0;
  right: 0;
  bottom: 0;
  left: 0;
  z-index: 1;

  background: white;
  box-shadow: 0px 2px 16px rgba(0,0,0,0.5);
}

/* show the modal: 
   add class to the body to reveal */
.show-video-modal .video-modal {
  opacity: 1.0;

  transform: translate(0%,0%);
  -webkit-transform: translate(0%,0%);
}
.show-video-modal .video-modal .overlay {
  opacity: 1.0;
}
.show-video-modal .video-modal-content {
  transform: translate(0%,0%);
  -webkit-transform: translate(0%,0%);
}











  .rotate-content {
    font: 400 14px/20px "Helvetica Neue",Helvetica,Arial,sans-serif;
    position: fixed;
    height: 100%;
    width: 100%;
    top: 0;
    left: 0;
    background-color: #555;
    opacity: .9;
    z-index: 15;
    pointer-events: none;
    display: none;
    align-items: center;
    justify-content: center;
    display: flex;
    pointer-events: auto;
  }
  .rotate-box {
    width: 80%;
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
  }
  .rotate-device-img {
    background-image: url(https://lh3.googleusercontent.com/d/1SQciyThzVKgk5S5mZI8o_BzGYOap5EnV);
    background-position: 50%;
    background-size: contain;
    background-repeat: no-repeat;
    width: 30%;
    padding-bottom: 25.5%;
  }
  .rotate-text {
    color: #f1f1f1;
    text-align: center;
  }
  .rotate-title {
    font-size: 20px;
    margin-bottom: 10px;
    margin-top: 30px;
  }
  .rotate-subtitle {
    font-size: 14px;
  }



 



  
   @media screen and (min-width:700px){
   #drivemodal{
    height: 480px;
    width: 180%;
    margin-left: -40%;
  }
      .metronome { 
        margin-top: -40px;
     margin-left: -200px;
        width: 300px;
  }
  .menu-bar{
     margin-top: -420px;
     margin-left: -165px;
  }
     .menu-bar2{
        margin-top: -370px;
     margin-left: -165px;
  }
     .mic-container{
       margin-top: -20px;
    margin-left: 450px;
  }


      #record-audio{
        margin-top: 40px;
    margin-left: -605px;
  }
     #lsnContainer{
       height: 285px !important;
       max-height: 285px !important;
     }
     
     .profile-user-data{
       margin-top: 10px;
     }
     
   
     
     .achievement-list-panel{
       margin-top: 50px;
     }
     
     .close-modal {
       margin-right: -150px;
     }
   
   
}
  




  @media screen and (min-width:1250px){
    #drivemodal{
     margin-top: -15px;
    width: 200%;
     height: 850px;
    margin-left: -50%;
  }
       .metronome { 
          margin-top: -10px;
     margin-left: -330px;
         width: 300px;
  }
  .menu-bar{
     margin-top: -730px;
     margin-left: -300px;
  } 
      .menu-bar2{
         margin-top: -680px;
     margin-left: -300px;
  }

        .mic-container{
          margin-top: 30px;
    margin-left: 640px;
  }
       #record-audio{ 
          margin-top: 25px;
    margin-left: -940px;
  } 
    

}







*,
*::before,
*::after {
    box-sizing: border-box;
}
html {
    font-family: sans-serif;
    -ms-text-size-adjust: 100%;
    -webkit-text-size-adjust: 100%;
}



#contain-all {
    width: 100%;
    overflow: hidden;
    background: #fff;
    backface-visibility: hidden;
    -webkit-transform-style: preserve-3d;
}
.contain {
    max-width: 73.75rem;
    margin-left: auto;
    margin-right: auto;
    padding-top: 3rem;
    padding-bottom: 3rem;
    padding-left: 1.5rem;
    padding-right: 1.5rem;
}
.contain::after {
    clear: both;
    content: "";
    display: table;
}
@media screen and (min-width: 48rem) {
    .contain {
        padding-top: 6rem;
        padding-bottom: 6rem;
    }
}
@media screen and (min-width: 73.75rem) {
    .contain {
        padding-left: 0;
        padding-right: 0;
    }
}
.contain--small {
    padding-bottom: 0.5rem;
    margin: 0 auto;
}
@media screen and (min-width: 48rem) {
    .contain--small {
        padding-top: 1rem;
    }
}







.h6 {
    font-size: 15px;
   transform: translateY(-7px);;
    font-weight: 600;
    color: #7d97ad;
}


.page-leaderboard {
    background-color: #fafbfc;
}
.page-leaderboard .hero {
    background-image: url(https://d125fmws0bore1.cloudfront.net/assets/pages/leaderboard/hero-leaderboard-b861e1752ed28ae950fcfccd51008fe7f4d158a08c68e909201f46e6086992ad.jpg);
}
.page-leaderboard .leaderboard-progress {
    clear: both;
}
.page-leaderboard .leaderboard-progress .contain {
    padding: 3em 1.5em 2em 1.5em;
}
@media (min-width: 70em) {
    .page-leaderboard .leaderboard-progress .contain {
        padding: 6em 0 4.5em 0;
    }
}
.page-leaderboard .leaderboard-progress p {
    max-width: 48.5em;
    margin: 0 auto;
}
.page-leaderboard .ranking {
    clear: both;
}
.page-leaderboard .ranking .contain {
    padding: 0 1.5em;
}
.page-leaderboard .ranking .ranking-table {
    max-width: 66em;
    margin: 0 auto;
}
.page-leaderboard .ranking .ranking-table-body {
    box-shadow: 0 0 0.75em 0 rgba(46, 60, 73, 0.12);
    border-radius: 0.375rem;
    border: solid 0.063em #dbe2e8;
    max-height: 24.625em;
    overflow: hidden;
    -webkit-overflow-scrolling: touch;
}
@media (min-width: 33em) {
    .page-leaderboard .ranking .ranking-table-body {
        max-height: 31.125em;
    }
}
.page-leaderboard .ranking .ranking-table-header-row {
    display: flex;
    flex-direction: row;
    justify-content: space-between;
    padding-top: 1.125em;
}
@media (min-width: 33em) {
    .page-leaderboard .ranking .ranking-table-header-row {
        padding-top: 1.875em;
    }
}
.page-leaderboard .ranking .ranking-table-header-data {
    text-align: center;
    align-self: center;
}
.page-leaderboard .ranking .ranking-table-header-data:first-child {
    width: 20%;
}
@media (min-width: 48em) {
    .page-leaderboard .ranking .ranking-table-header-data:first-child {
        width: 15%;
    }
}
.page-leaderboard .ranking .ranking-table-header-data:nth-child(2) {
    padding-left: 9%;
    text-align: left;
    width: 50%;
}
@media (min-width: 33em) {
    .page-leaderboard .ranking .ranking-table-header-data:nth-child(2) {
        padding-left: 6.3%;
    }
}
@media (min-width: 48em) {
    .page-leaderboard .ranking .ranking-table-header-data:nth-child(2) {
        padding-left: 9%;
        width: 55%;
    }
}
@media (min-width: 70em) {
    .page-leaderboard .ranking .ranking-table-header-data:nth-child(2) {
        padding-left: 4%;
    }
}
.page-leaderboard .ranking .ranking-table-header-data:nth-child(3) {
    width: 30%;
}
@media (min-width: 33em) {
    .page-leaderboard .ranking .ranking-table-header-data:nth-child(3) {
        width: 25%;
    }
}
.page-leaderboard .ranking .ranking-table-row {
    display: flex;
    flex-direction: row;
    justify-content: space-between;
    padding-top: .875em;
    padding-bottom: .875em;
    background-color: #fff;
}
@media (min-width: 33em) {
    .page-leaderboard .ranking .ranking-table-row {
        padding-top: 1.125em;
        padding-bottom: 1.125em;
    }
}
.page-leaderboard .ranking .ranking-table-row:nth-child(even) {
    background-color: #fafbfc;
}
.page-leaderboard .ranking .ranking-table-row-leader-1,
.page-leaderboard .ranking .ranking-table-row-leader-2,
.page-leaderboard .ranking .ranking-table-row-leader-3 {
    display: flex;
    flex-direction: row;
    justify-content: space-between;
    padding-top: .875em;
    padding-bottom: .875em;
    background-color: #fff;
    box-shadow: 0 0 0.75em 0 rgba(46, 60, 73, 0.12);
    border-radius: 0.375rem;
    margin-bottom: 1.25em;
}
@media (min-width: 33em) {
    .page-leaderboard .ranking .ranking-table-row-leader-1,
    .page-leaderboard .ranking .ranking-table-row-leader-2,
    .page-leaderboard .ranking .ranking-table-row-leader-3 {
        padding-top: 1.125em;
        padding-bottom: 1.125em;
    }
}
.page-leaderboard .ranking .ranking-table-row-leader-1 .ranking-table-data-leader-1,
.page-leaderboard .ranking .ranking-table-row-leader-2 .ranking-table-data-leader-2,
.page-leaderboard .ranking .ranking-table-row-leader-3 .ranking-table-data-leader-3 {
    display: flex;
    justify-content: center;
    width: 20%;
}
@media (min-width: 48em) {
    .page-leaderboard .ranking .ranking-table-row-leader-1 .ranking-table-data-leader-1,
    .page-leaderboard .ranking .ranking-table-row-leader-2 .ranking-table-data-leader-2,
    .page-leaderboard .ranking .ranking-table-row-leader-3 .ranking-table-data-leader-3 {
        width: 15%;
    }
}
.page-leaderboard .ranking .ranking-table-row-leader-1 .ranking-table-data-leader-1 .medal-gold,
.page-leaderboard .ranking .ranking-table-row-leader-2 .ranking-table-data-leader-2 .medal-silver,
.page-leaderboard .ranking .ranking-table-row-leader-3 .ranking-table-data-leader-3 .medal-bronze {
    margin-top: -1.313em;
    height: 2.875em;
    width: 2.875em;
}
@media (min-width: 33em) {
    .page-leaderboard .ranking .ranking-table-row-leader-1 .ranking-table-data-leader-1 .medal-gold,
    .page-leaderboard .ranking .ranking-table-row-leader-2 .ranking-table-data-leader-2 .medal-silver,
    .page-leaderboard .ranking .ranking-table-row-leader-3 .ranking-table-data-leader-3 .medal-bronze {
        margin-top: -1.563em;
        height: 3.875em;
        width: 3.875em;
    }
}
.page-leaderboard .ranking .ranking-table-row-leader-1 {
    border: solid 0.125em #ecc81a;
}
.page-leaderboard .ranking .ranking-table-row-leader-1 .ranking-table-data-leader-1 .medal-gold {
    background: url(https://d125fmws0bore1.cloudfront.net/assets/pages/leaderboard/medal-gold-c49052bfa07f36621f16dbe77f7fc36cbafd72ff088ea970256ff998be05687b.svg) no-repeat;
    background-size: contain;
}
.page-leaderboard .ranking .ranking-table-row-leader-2 {
    border: solid 0.125em #dbe2e8;
}
.page-leaderboard .ranking .ranking-table-row-leader-2 .ranking-table-data-leader-2 .medal-silver {
    background: url(https://d125fmws0bore1.cloudfront.net/assets/pages/leaderboard/medal-silver-d099c5dd916c167c3ba4716c8968a819f317daaef1901c8e8bae6c6932852faa.svg) no-repeat;
    background-size: contain;
}
.page-leaderboard .ranking .ranking-table-row-leader-3 {
    border: solid 0.125em #dfdfd1;
}
.page-leaderboard .ranking .ranking-table-row-leader-3 .ranking-table-data-leader-3 .medal-bronze {
    background: url(https://d125fmws0bore1.cloudfront.net/assets/pages/leaderboard/medal-bronze-d0f15d413800257442c8d4b2d5239cfe28c9fd9594f863ab1fad5258f8d1d5eb.svg) no-repeat;
    background-size: contain;
}
.page-leaderboard .ranking .ranking-table-data {
    align-self: center;
    color: #525c65;
    font-size: 1em;
}
.page-leaderboard .ranking .ranking-table-data:first-child {
    text-align: center;
    width: 20%;
    color: #525c65;
    font-weight: 600;
}
@media (min-width: 33em) {
    .page-leaderboard .ranking .ranking-table-data:first-child {
        font-size: 1.25em;
    }
}
@media (min-width: 48em) {
    .page-leaderboard .ranking .ranking-table-data:first-child {
        width: 15%;
    }
}
.page-leaderboard .ranking .ranking-table-data:nth-child(2) {
    color: #2e3d49;
    width: 55%;
    font-size: .875em;
    padding-left: 9%;
}
@media (min-width: 33em) {
    .page-leaderboard .ranking .ranking-table-data:nth-child(2) {
        font-size: 1em;
    }
}
@media (min-width: 48em) {
    .page-leaderboard .ranking .ranking-table-data:nth-child(2) {
        font-size: 1em;
        width: 55%;
    }
}
@media (min-width: 70em) {
    .page-leaderboard .ranking .ranking-table-data:nth-child(2) {
        font-size: 1em;
        padding-left: 4%;
    }
}
.page-leaderboard .ranking .ranking-table-data:nth-child(3) {
    font-size: .875em;
    text-align: center;
    width: 25%;
    padding-right: 4%;
}
@media (min-width: 33em) {
    .page-leaderboard .ranking .ranking-table-data:nth-child(3) {
        padding-right: 0%;
        font-size: 1em;
    }
}
.page-leaderboard .ranking .ranking-table-data:nth-child(3) .complete {
    color: gray;
    font-size: 16px;
}


/*! CSS Used fontfaces */

@font-face {
    font-family: 'Open Sans';
    font-style: normal;
    font-weight: 300;
    src: local("Open Sans Light"), local("OpenSans-Light"), url(https://fonts.gstatic.com/s/opensans/v13/DXI1ORHCpsQm3Vp6mXoaTaRDOzjiPcYnFooOUGCOsRk.woff) format("woff");
}
@font-face {
    font-family: 'Open Sans';
    font-style: normal;
    font-weight: 400;
    src: local("Open Sans"), local("OpenSans"), url(https://fonts.gstatic.com/s/opensans/v13/cJZKeOuBrn4kERxqtaUH3bO3LdcAZYWl9Si6vvxL-qU.woff) format("woff");
}
@font-face {
    font-family: 'Open Sans';
    font-style: normal;
    font-weight: 600;
    src: local("Open Sans Semibold"), local("OpenSans-Semibold"), url(https://fonts.gstatic.com/s/opensans/v13/MTP_ySUJH_bn48VBG8sNSqRDOzjiPcYnFooOUGCOsRk.woff) format("woff");
}
@font-face {
    font-family: 'Open Sans';
    font-style: italic;
    font-weight: 300;
    src: local("Open Sans Light Italic"), local("OpenSansLight-Italic"), url(https://fonts.gstatic.com/s/opensans/v13/PRmiXeptR36kaC0GEAetxvR_54zmj3SbGZQh3vCOwvY.woff) format("woff");
}
@font-face {
    font-family: 'Open Sans';
    font-style: italic;
    font-weight: 400;
    src: local("Open Sans Italic"), local("OpenSans-Italic"), url(https://fonts.gstatic.com/s/opensans/v13/xjAJXh38I15wypJXxuGMBrrIa-7acMAeDBVuclsi6Gc.woff) format("woff");
}


  
  .unlockBtn{
  font-family: "Poppins", sans-serif;
  text-decoration: none;
  z-index: 30;
  box-sizing: border-box;
  position: relative;
  display: inline-flex;
  align-items: center;
  justify-content: center;
  width: auto;
  padding-left: 1rem;
  padding-right: 1rem;
  padding-top: 0.55rem;
  padding-bottom: 0.55rem;
  overflow: hidden;
  font-weight: 700;
  color: white;
  border-radius: 0.375rem;
  --tw-ring-offset-width: 2px;
  cursor: pointer;
  transition-property: all;
  transition-timing-function: cubic-bezier(0.4, 0, 0.2, 1);
  transition-duration: 150ms;
  transition-duration: 0.3s;
  --tw-ring-offset-color: #c7d2fe;
  --tw-ring-offset-shadow: var(--tw-ring-inset) 0 0 0
    var(--tw-ring-offset-width) var(--tw-ring-offset-color);
  --tw-ring-shadow: var(--tw-ring-inset) 0 0 0
    calc(1px + 2px) rgb(59 130 246 / 0.5);
  box-shadow: var(--tw-ring-offset-shadow), var(--tw-ring-shadow),
    var(--tw-shadow, 0 0 #0000);
  --tw-ring-offset-color: #c7d2fe;
}

.unlockBtn:hover{
  --tw-ring-offset-color: #6366f1;
}

.unlockBtn:focus{
  outline: transparent solid 2px;
  outline-offset: 2px;
}


.btnBorderRight{
  position: absolute;
  bottom: 0;
  right: 0;
  width: 2rem;
  height: 5rem;
  margin-bottom: -2rem;
  margin-right: -1.25rem;
  transition-property: all;
  transition-timing-function: cubic-bezier(0.4, 0, 0.2, 1);
  transition-duration: 150ms;
  transition-duration: 0.3s;
  transition-timing-function: cubic-bezier(0, 0, 0.2, 1);
  background-color: rgb(255 255 255);
  opacity: 0.1;
  transform: translate(0.25rem, 0) rotate(45deg);
}


.btnBorderLeft{
  position: absolute;
  top: 0;
  left: 0;
  width: 5rem;
  height: 2rem;
  margin-top: -0.25rem;
  margin-left: -3rem;
  transition-property: all;
  transition-timing-function: cubic-bezier(0.4, 0, 0.2, 1);
  transition-duration: 150ms;
  transition-duration: 0.3s;
  transition-timing-function: cubic-bezier(0, 0, 0.2, 1);
  background-color: rgb(255 255 255);
  opacity: 0.1;
  transform: translate(-0.25rem, 0) rotate(-45deg);
}


.btniContainer{
  position: relative;
  z-index: 20;
  display: flex;
  align-items: center;
  font-size: 0.875rem;
  line-height: 1.25rem;
}




.btnIcon {
  background: none;
  box-shadow: none;
   display: flex;
  align-items: center;
  justify-content: center;
  width: 24px;
  height: 24px;

  color: white;
  /*border: 1px solid #d8d8d8;*/
  margin-left: 7px;
  margin-top: auto;

</style>

<div ng-app="studentsApp" ng-controller="Controller1" >
  
<div class="dashboard-container">
 <div class="showbox" ng-if="!userDataLoaded">
      <div class="loader">
        <svg class="circular" viewbox="25 25 50 50">
          <circle class="path" cx="50" cy="50" r="20" fill="none" stroke-width="2" stroke-miterlimit="10"></circle>
        </svg>
      </div>
    </div>  


    <div class="row" >
      <div class="col-sm-12">
        <div class="profile-user-data clearfix">
          <div class="circle">
              <img class="profile-pic" src={{picture}}>
          </div>
   
          <div class="main-data" >
            <h4 style="font-size: 19px;">{{userData.name}}</h4>
             
         
        <div class="pull-left achievement-count" ng-if="userData.classtime !== ''" style="color: #77777a; font-size: 12px;"> PLAN ZOOM
           <i class="ri-video-chat-fill" style="color: #0B5CFF"></i>  </div>
       <div class="pull-left achievement-count" ng-if="userData.classtime === ''" style="color: #77777a; font-size: 12px;"> PLAN ASÍNCRONO
            <i class="ri-mac-line"></i>  </div> 
     
       
          <br>
          <div style="margin-top: 1px">    {{userLevel}}  </div>
             

        <div class="progress">
          <div class="progress-bar" style="background-color: {{userData.color}};" role="progressbar" aria-valuemin="0" aria-valuemax="100" ng-style="{width: userData.progress + '%'}" ng-init="startAnimation()"></div>
        </div>

          </div>  
        </div>
        
  
        
          
         <div class="user-stats " ng-if="userData.status != 'ACTIVO'" style="text-align: center;"> 
            <div  class="alert alert-danger">
     Cuenta bloqueada
        </div> <br><br><br><br><br>
 <button class="unlockBtn" onclick="window.top.location.href='https://cubiculociencias.github.io/tallerdepiano/main#/menu/payment';" ng-if="status != 'ACTIVO'" style="background-color: #1894cc">
            <span class="btnBorderRight"></span>
            <span class="btnBorderLeft"></span>
            <span class="btniContainer">
             <i class="btnIcon ri-lock-fill" style="margin-top: -1px; margin-left: -5px;"> </i>
           Desbloquear
            </span>
          </button> <br><br><br><br><br><br><br><br><br><br>
        </div>
        
          
        <div class="dashboard-panel registry-log-panel" ng-if="userData.status == 'ACTIVO'">
          <div class="panel-header">
        <h4><i class="fa fa-fw fa-flag"></i> Actividad</h4>
          
          </div>
          <div class="panel-body log-list-container" id="lsnContainer" style="max-height: 400px;"> 
             <ul class="list-unstyled log-list">
             <li ng-repeat="entry in history | filter:filterByLevel" ng-class="{'status-pending': entry.status === 'En revisión', 'status-delayed': entry.status === 'Límite de entrega: ' && stringToDate(entry.limitdate) < today, 'status-completed': entry.status === 'Evaluada', 'status-error': entry.status === 'A corrección', 'status-default': (entry.status === 'Límite de entrega: '  && stringToDate(entry.limitdate) >= today) || entry.status === 'Asignado'}">
                <button style="float:right; margin-right: -15px; margin-top: 7px; font-size: 11px;" data-pdf-url="{{entry.pdf}}" onclick="showModal(this)" ng-click="selectEntry(entry)" ng-if="entry.status !== 'En revisión' && entry.status !== 'Evaluada'" class="btn btn-dark btn-sm">Abrir </button>
               <div style="float:right; margin-right: -9px; margin-top: 8px;" ng-if="entry.status == 'En revisión'"> Entregada </div>
               <div style="float:right; margin-right: -15px; color: green; font-size: 15px; font-weight: 600;" ng-if="entry.status == 'Evaluada' && entry.score"><i class="ri-award-fill" style="font-size: 25px; color: orange; " ng-if="entry.score == 100"></i> +{{entry.score}}    </div> 
                <div style="float:right; margin-right: -15px;" ng-if="entry.status == 'Evaluada' && entry.quote"><i class="ri-award-fill" style="font-size: 25px; color: orange;"></i>  </div>
       <div ng-if="entry.status == 'Límite de entrega: ' && entry.video" data-youtube-id="{{entry.video}}" 
class="js-trigger-video-modal" onclick="toggle_video_modal(this)" style="color: red; cursor: pointer; padding: 0 40px"> <i class="ri-youtube-fill yticon" style="float:right;  font-size: 26px; "></i></div>     
                <div ng-if="entry.status === 'A corrección' && entry.cVideo" data-youtube-id="{{entry.cVideo}}" 
class="js-trigger-video-modal" onclick="toggle_video_modal(this)" style="color: red; cursor: pointer; padding: 0 40px"> <i class="ri-file-video-line yticon" style="float:right;  font-size: 26px; "></i></div>  
               <div ng-if="entry.status === 'A corrección' && entry.cPDF" data-pdf-url="{{entry.cPDF}}" onclick="showModal3(this)" ng-click="selectEntry(entry)" style="color: gray; cursor: pointer; padding: 0 40px"> <i class="ri-file-warning-line yticon" style="float:right; font-size: 26px; "></i></div> 
                        <span style="font-size: 13px;">{{entry.name}}</span>  
               <small style="font-size: 11px; margin-top: 2px;">{{entry.status}} <span ng-if="entry.status == 'Límite de entrega: '"> {{dateToString(entry.limitdate)}}</span></small>
           
               <small ng-if="entry.status == 'Límite de entrega: ' && stringToDate(entry.limitdate) < today" style="font-size: 9px; margin-top: 2px; position:absolute;">Entrega atrasada, envía un avance</small>
                    </li>
            </ul>
           
          </div>
        </div>
      </div>

  
  
  
  
   <div id="modal-container2" class="modal-container">
      <div id="rotate-screen" style="overflow: hidden; display: none;">
    <div class="rotate-content">
      <div class="rotate-box">
        <div class="rotate-device-img"></div>
        <div class="rotate-text rotate-title">La vista en modo vertical no es compatible</div>
        <div class="rotate-text rotate-subtitle">El modo vertical no es compatible en tablets. Por favor, rota tu dispositivo a modo horizontal para una mejor experiencia.</div>
      </div>
  </div>
</div>
     
  <div class="modal-background"  >   
    <div class="modal-msg" > 
   
        <div class="mic-container" id="recorder" >
      <div class="audio-record" id="recorder2">
        <input type="checkbox" id="audio_record-icon" name="audio_record-icon ">
        <label for="audio_record-icon" class="player-icon audio_record-icon">
   <img id="record" src="https://assets.codepen.io/3537853/record.svg" />
        </label> 
        <span> grabando... </span>
      </div>
      <div class="audio-properties" style="display: none;">              
        <div class="audio_record-control">         
          <button class="btn btn-default player-icon save" id="save-recording" onclick="saveRecording();">
          </button>
        
        </div>
      </div>
 
<div id="record-audio"></div>
<!-- <button id="delete-audio">Eliminar</button> -->
  <input type="hidden" id="AudioData">
<span id="clicks"></span>
         
</div>
     
       <div class="metronome">  
    <div hidden>
    <button class="main-btn blue flex-centered" id="tap" hidden>Tap</button> 
              <button class="min-btn" id="beatMinus">-</button>
              <input type="number" class="beat-count" id="beatCount" value="4" readonly>
              <button class="min-btn" id="beatPlus">+</button>
    </div>
    
     <ul id="dotTarget" style="display: none;">
            <li class="beat"></li>
            <li class="beat"></li>
            <li class="beat"></li>
            <li class="beat"></li>
          </ul>
          <div id='digitalDisplayContainer'>
            <h3 id="beatFlag">1</h3><h3 id="beatNbr">/4</h3>
          </div>

     <div style="float: left">   
       <span id="tempo-disp" style="font-size:40px;">60</span>  bpm
     </div>
      
          <button class="main-btn" id="start">
    <i class="ri-play-fill" style="font-size: 44px; color: white;"></i>
          </button>
      <button class="main-btn" id="stop">
               <i class="ri-pause-fill" style="font-size: 44px; color: white;"></i>
             </button>
      
      
      <div class="input-section" style="opacity: 1">
    <input type="range" min="0" max="200" value="60" class="tempoSlider" step="1" oninput="temp(this.value)" id="tempo">
    <div class="thin-fill"></div>
    <div class="thick-fill"></div>
  </div>   
  </div> 

  
        <iframe class="drive" id="drivemodal" src="" frameborder="0">
        </iframe>
    
         
   
       
      <ul class="menu-bar" id="menu-bar1">
            <li><a href="#" id="back-menu-bar" onclick="hideModal()">Salir</a></li> 
           <li><a href="#" id="toggle-recorder">Grabar</a></li> 
        </ul> 
       <ul class="menu-bar2" id="menu-bar2" style="visibility: hidden;">
            <li><a href="#" id="delete-audio">Eliminar</a></li>
           <li><a href="#" ng-click="uploadAudio()">Enviar</a></li> 
       <!--     <li><a href="#" ng-click="uploadAudio($index)">Entregar</a></li>--> 
        </ul>
     <!--  <div class="multimedia" style="font-size: 35px;">
 <div data-youtube-id="bwiHhgPjkR8" 
class="js-trigger-video-modal" onclick="toggle_video_modal(this)"> <i class="ri-youtube-fill" style="float: left; margin-left: 7%;"></i></div>
         <div ><i class="ri-mic-2-fill"></i></div>
   <div class="pdfreveal" id="two"><i class="ri-file-pdf-2-fill" style="float: right; margin-right: 7%;"></i></div>-->
             </div>
      <br>
    <!--<button ng-click="uploadAudio()" style="float: right;">Subir</button>-->

    </div>
  </div>
  
  
  
  
     <div id="modal-container3" class="modal-container">     
  <div class="modal-background"  >   
    <div class="modal-msg" > 
   

        <iframe class="drive" id="drivemodal3" src="" frameborder="0">
        </iframe>
    
              <a 
          href="#" 
          class="close-modal" onclick="closemodal()" 
        >
          <!-- X close video icon -->
          <svg 
            version="1.1" 
            xmlns="http://www.w3.org/2000/svg" 
            xmlns:xlink="http://www.w3.org/1999/xlink"
            x="0"
            y="0"
            viewBox="0 0 32 32" 
            style="enable-background:new 0 0 32 32;" 
            xml:space="preserve" 
            width="24" 
            height="24" 
          >
                <path fill="#ffffff" d="M30.3448276,31.4576271 C29.9059965,31.4572473 29.4852797,31.2855701 29.1751724,30.980339 L0.485517241,2.77694915 C-0.122171278,2.13584324 -0.104240278,1.13679247 0.52607603,0.517159487 C1.15639234,-0.102473494 2.17266813,-0.120100579 2.82482759,0.477288136 L31.5144828,28.680678 C31.9872448,29.1460053 32.1285698,29.8453523 31.8726333,30.4529866 C31.6166968,31.0606209 31.0138299,31.4570487 30.3448276,31.4576271 Z" id="Shape"></path>
                <path fill="#ffffff" d="M1.65517241,31.4576271 C0.986170142,31.4570487 0.383303157,31.0606209 0.127366673,30.4529866 C-0.12856981,29.8453523 0.0127551942,29.1460053 0.485517241,28.680678 L29.1751724,0.477288136 C29.8273319,-0.120100579 30.8436077,-0.102473494 31.473924,0.517159487 C32.1042403,1.13679247 32.1221713,2.13584324 31.5144828,2.77694915 L2.82482759,30.980339 C2.51472031,31.2855701 2.09400353,31.4572473 1.65517241,31.4576271 Z" id="Shape"></path>
          </svg> 
        </a>   
   

             </div>
    </div>
  </div>

  
  
   <div class="video-modal">
    <div id="video-modal-content" class="video-modal-content">
       <iframe 
          id="youtube" 
          width="100%" 
          height="100%" 
          frameborder="0" 
          allow="autoplay" 
          allowfullscreen 
          src=
        ></iframe>

        <a 
          href="#" 
          class="close-video-modal" 
        >
          <!-- X close video icon -->
          <svg 
            version="1.1" 
            xmlns="http://www.w3.org/2000/svg" 
            xmlns:xlink="http://www.w3.org/1999/xlink"
            x="0"
            y="0"
            viewBox="0 0 32 32" 
            style="enable-background:new 0 0 32 32;" 
            xml:space="preserve" 
            width="24" 
            height="24" 
          >
            <g id="icon-x-close">
                <path fill="#ffffff" d="M30.3448276,31.4576271 C29.9059965,31.4572473 29.4852797,31.2855701 29.1751724,30.980339 L0.485517241,2.77694915 C-0.122171278,2.13584324 -0.104240278,1.13679247 0.52607603,0.517159487 C1.15639234,-0.102473494 2.17266813,-0.120100579 2.82482759,0.477288136 L31.5144828,28.680678 C31.9872448,29.1460053 32.1285698,29.8453523 31.8726333,30.4529866 C31.6166968,31.0606209 31.0138299,31.4570487 30.3448276,31.4576271 Z" id="Shape"></path>
                <path fill="#ffffff" d="M1.65517241,31.4576271 C0.986170142,31.4570487 0.383303157,31.0606209 0.127366673,30.4529866 C-0.12856981,29.8453523 0.0127551942,29.1460053 0.485517241,28.680678 L29.1751724,0.477288136 C29.8273319,-0.120100579 30.8436077,-0.102473494 31.473924,0.517159487 C32.1042403,1.13679247 32.1221713,2.13584324 31.5144828,2.77694915 L2.82482759,30.980339 C2.51472031,31.2855701 2.09400353,31.4572473 1.65517241,31.4576271 Z" id="Shape"></path>
            </g>
          </svg>
        </a>
    </div>
    <div class="overlay"></div>
</div>
  
  
  
  
</div> 
  
</div>




<script>
  
  angular.module('studentsApp', [])
  .controller('Controller1', ['$http', '$scope', '$sce', '$timeout', '$interval', function($http, $scope, $sce, $timeout, $interval) {
   $scope.userData = [];
  $scope.userDataLoaded = false;
  $scope.today = new Date()

   function getData(){
  var requestData = { 
    action: "getProfileData",
    token: "U2FsdGVkX18Y3Ikd7Ppb+2aVdv2AgN/p1JCgChHIAXGylvVbAToWW9G0M2yhM3aa"
  };

  var config = {
    headers: {
      "Content-Type": "text/plain;charset=utf-8"
    },
    followRedirects: true, 
  };
 
      
   
  $http.post('https://script.google.com/macros/s/AKfycbzuRdRbf_Yy-JUEUm4E2qzvWLm6hquJNhqEGEKecOPLowyjBJU8SS_wQ57W2--XobEA/exec', requestData, config)
    .then(function(response) { 
      $scope.userData = response.data;
      $scope.userDataLoaded = true;
     $scope.userLevel = $scope.getLevel($scope.userData.lvl)
      $scope.lsn = $scope.userData.lsn
 $scope.history = $scope.userData.lessons
      $scope.startAnimation = function() {
        $('.progress-bar').animate({
          width: $scope.userData.progress + '%'
        }, 500); 
      };
    $scope.picture = $scope.userData.photo
  

         
    
    })
    
     $scope.getLevel = function(lvl){
  if(lvl == 0){
     return "Nivel Preparatorio"
  }else{
    return "Nivel "+lvl.toString()
  }
}
    }
    
   getData()
    
    $scope.dateToString = function(fechaOriginal){
  const partesFecha = fechaOriginal.split('/');
  const fecha = new Date(partesFecha[2], partesFecha[1] - 1, partesFecha[0]);
  const diasSemana = ["Dom", "Lun", "Mar", "Mié", "Jue", "Vie", "Sáb"];
  const meses = ["Ene", "Feb", "Mar", "Abr", "May", "Jun", "Jul", "Ago", "Sep", "Oct", "Nov", "Dic"];  
  const diaSemana = diasSemana[fecha.getDay()];
  const dia = fecha.getDate();
  const mes = meses[fecha.getMonth()];

  return `${diaSemana} ${dia} de ${mes}`;
}
    
    $scope.stringToDate = function(dateStr) {
  const parts = dateStr.split('/');
  var date = new Date(parts[2], parts[1] - 1, parts[0]);
  date.setDate(date.getDate() + 1);
  return date
};

   $scope.filterByLevel = function(entry) {
    return entry.index <= $scope.lsn;
};


   
    
    
     
    $scope.uploadAudio = function() { 
     var base64Audio = document.getElementById("AudioData").value
       $scope.selectedEntry.status = "En revisión"


    var requestData = {
    action: "postAudio",
    token: localStorage.getItem('TPtoken'),
      lesson: $scope.selectedEntry.name,
      index: $scope.selectedEntry.index,
    blob: base64Audio
  };
 
  var config = {
    headers: {
      "Content-Type": "text/plain;charset=utf-8"
    },
    followRedirects: true, 
  }; 
   $http.post('https://script.google.com/macros/s/AKfycbzuRdRbf_Yy-JUEUm4E2qzvWLm6hquJNhqEGEKecOPLowyjBJU8SS_wQ57W2--XobEA/exec', requestData, config)
    .then(function(response) {
    })  

      /*  $('#record-audio').empty(); 
        document.getElementById("AudioData").value = "";
      //document.getElementById('recorder').style.display = 'none';
      var menuBar1 = document.getElementById('menu-bar1');
        var menuBar2 = document.getElementById('menu-bar2');
        menuBar2.style.visibility = 'hidden';
        menuBar1.style.visibility = 'visible';
        document.getElementById('back-menu-bar').style.visibility = 'visible';
       alert("Actividad enviada a revisión")*/
      
      document.getElementById('menu-bar1').style.visibility = 'visible';
       document.getElementById('menu-bar2').style.visibility = 'hidden';
        document.getElementById('back-menu-bar').style.visibility = 'visible';
      document.getElementById("AudioData").value = "";
      $('#record-audio').empty();
       document.getElementById('recorder').style.display = 'none';
      
       const modal = document.getElementById('modal-container2');
       $("#drivemodal").attr('src', '');  
        modal.classList.add('out');
        setTimeout(() => {
            modal.classList.remove('four', 'out');
        }, 400);
      var metronome = document.getElementById('recorder');
      metronome.style.display = 'none';
   }; 




    $scope.selectedEntry = null;
    $scope.selectEntry = function(entry) {
       $scope.selectedEntry = entry;
    };
    


    
      $interval(getData, 120000);
    

}]);
  

  window.onload = function(){
  
if (/Android/i.test(navigator.userAgent) && !/Mobile/i.test(navigator.userAgent)) {
  //alert("Tablet");
  detectOrientation();
  window.addEventListener('load', detectOrientation);
  window.addEventListener('resize', detectOrientation);
} 


  function detectOrientation() {
    if (window.matchMedia("(orientation: portrait)").matches) {
      document.getElementById('rotate-screen').style.display = 'block'
    }
    if (window.matchMedia("(orientation: landscape)").matches) {
      document.getElementById('rotate-screen').style.display = 'none'
    }
  }

  

};





 document.getElementById('toggle-recorder').addEventListener('click', function() {
          var metronome = document.getElementById('recorder');
          var menuBar1 = document.getElementById('menu-bar1');
          var menuBar2 = document.getElementById('menu-bar2');
   
            if (metronome.style.display === 'none' || metronome.style.display === '') {
               document.getElementById('recorder2').style.visibility = 'visible';
                metronome.style.display = 'block';
              document.getElementById('back-menu-bar').style.visibility = 'hidden';     
              $('#audio_record-icon').prop('checked', true);
               $('#toggle-recorder').text('Detener');
              startRecording();
              vol(0.3)
            } else {
                //metronome.style.display = 'none';
              //document.getElementById('back-menu-bar').style.visibility = 'visible';
              menuBar1.style.visibility = 'hidden';
               menuBar2.style.visibility = 'visible';
              document.getElementById('recorder2').style.visibility = 'hidden';
               $('#audio_record-icon').prop('checked', false);
               $('#toggle-recorder').text('Grabar');
              vol(1)
              stopRecording();
              
            }
        });


function toggle_video_modal(element) {
     var url = element.getAttribute('data-youtube-id');
          $("#youtube").attr('src', url);        
          $("body").addClass("show-video-modal noscroll");  
  var icon = element.querySelector('.yticon');
    if (icon) {
        icon.style.animation = 'none';
    }
}

      // Close and Reset the Video Modal
      function close_video_modal() {
        
        event.preventDefault();
        $("body").removeClass("show-video-modal noscroll");
        $("#youtube").attr('src', '');
        
      }
      $('body').on('click', '.close-video-modal, .video-modal .overlay', function(event) {
          close_video_modal();
      });



 function showModal3(element) {
       var url = element.getAttribute('data-pdf-url');
          $("#drivemodal3").attr('src', url);   
        document.getElementById('modal-container3').classList.add('four');
     var icon = element.querySelector('.yticon');
    if (icon) {
        icon.style.animation = 'none';
    }
    };

function closemodal() {
        event.preventDefault();
       const modal = document.getElementById('modal-container3');
        modal.classList.add('out');
        setTimeout(() => {
            modal.classList.remove('four', 'out');
        }, 300);
        $("#drivemodal3").attr('src', '');      
}


  function showModal(element) {
       var url = element.getAttribute('data-pdf-url');
          $("#drivemodal").attr('src', url);   
        document.getElementById('modal-container2').classList.add('four');
 if (!/Android|webOS|iPhone|iPad|IEMobile|Opera Mini/i.test(navigator.userAgent)) {
   if (document.documentElement.requestFullscreen) {
        document.documentElement.requestFullscreen();
    } else if (document.documentElement.mozRequestFullScreen) { // Firefox
        document.documentElement.mozRequestFullScreen();
    } else if (document.documentElement.webkitRequestFullscreen) { // Chrome, Safari y Opera
        document.documentElement.webkitRequestFullscreen();
    } else if (document.documentElement.msRequestFullscreen) { // IE/Edge
        document.documentElement.msRequestFullscreen();
    }
} 
    };

    function hideModal() {
        const modal = document.getElementById('modal-container2');
       $("#drivemodal").attr('src', '');  
        modal.classList.add('out');
        setTimeout(() => {
            modal.classList.remove('four', 'out');
        }, 400);
      var metronome = document.getElementById('recorder');
      metronome.style.display = 'none';
       if (!/Android|webOS|iPhone|iPad|IEMobile|Opera Mini/i.test(navigator.userAgent)) {
   if (document.fullscreenElement) {
    document.exitFullscreen()
    }
  }
 }




 

function toggle_video_modal2(element) {
    var htmlContent = element.getAttribute('data-youtube-id');
    var iframe = document.getElementById('youtube');
    
     const regex = /^(https?:\/\/)?(www\.)?(youtube\.com|youtu\.?be)\/.+$/;
 if(regex.test(htmlContent)){
  $("#youtube").attr('src', htmlContent);  
 }else{
    iframe.contentWindow.document.open();
    iframe.contentWindow.document.write(`
        <!DOCTYPE html>
        <html>
    
<style>
  body {
background: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAkAAAAJCAYAAADgkQYQAAAAG0lEQVQYV2PcvHnzf19fX0YGPACvJEzfqCIGAC55BAqBlVXsAAAAAElFTkSuQmCC) repeat;
}





</style>
 

      <div class="well quoteWell">
        <blockquote>
          <p class="quote lead">${htmlContent}</p>
        </blockquote>

      </div>


        </html>
    `);
    iframe.contentWindow.document.close();
 }
  
    var icon = element.querySelector('.yticon');
    if (icon) {
        icon.style.animation = 'none';
    }
    document.body.classList.add("show-video-modal", "noscroll");
}






 function captureUserMedia(mediaConstraints, successCallback, errorCallback) {
    navigator.mediaDevices.getUserMedia(mediaConstraints).then(successCallback).catch(errorCallback);
  }

  var mediaConstraints = {
    audio: true
  };
  document.querySelector('#save-recording').onclick = function () {
      this.disabled = true;
      mediaRecorder.save();
      // alert('Drop WebM file on Chrome or Firefox. Both can play entire file. VLC player or other players may not work.');
  };
  //Parto con la registrazione audio
  function startRecording(idx) {
    
    $('#start-recording').disabled = true;
    audiosContainer = document.getElementById('audios-container');
    //document.getElementById("clicks").innerHTML = "Recording Started";

    var f = document.getElementById('clicks');
    setInterval(function () {
        f.style.display = (f.style.display == 'none' ? '' : 'none');
    }, 1000);

    captureUserMedia(mediaConstraints, onMediaSuccess, onMediaError);
  };
  //Stoppo la registrazione audio
  function stopRecording() {
      $('#stop-recording').disabled = true;
   
      //document.getElementById("clicks").innerHTML = "Recording Stopped";

      var f = document.getElementById('clicks');
      setInterval(function () {
          f.style.display = (f.style.display == 'none' ? '' : 'none');
      }, 1000);
    mediaRecorder.stop();
    mediaRecorder.stream.stop();
   
   
    $('.start-recording').disabled = false;
  };

  //Falvo Il file
  function saveRecording() {
      mediaRecorder.save();
  };

  var mediaRecorder;



function onMediaSuccess(stream) {
    const audioCtx = new (window.AudioContext || window.webkitAudioContext)();
  
    // Crear un filtro de paso bajo
    const lowpassFilter = audioCtx.createBiquadFilter();
    lowpassFilter.type = "lowpass"; // Filtro de paso bajo
    lowpassFilter.frequency.setValueAtTime(1000, audioCtx.currentTime); // Frecuencia de corte: 1000Hz
  
    // Crear la fuente de audio desde el stream del micrófono
    const source = audioCtx.createMediaStreamSource(stream);
  
    // Conectar la fuente al filtro
    source.connect(lowpassFilter);
  
    // Crear un destino para conectar el filtro
    const destination = audioCtx.createMediaStreamDestination();
    lowpassFilter.connect(destination);

    // Crear el MediaStreamRecorder a partir del audio filtrado
    mediaRecorder = new MediaStreamRecorder(destination.stream);
    mediaRecorder.stream = destination.stream; // Usamos el stream filtrado
    mediaRecorder.mimeType = 'audio/wav';  
    mediaRecorder.audioChannels = 1;

    mediaRecorder.ondataavailable = function(blob) {
      $('#record-audio').html("<audio id='player1' src=" + URL.createObjectURL(blob) + " style='width: 310px;' type='audio/mp3' controls></audio> ");
      
      const player = new MediaElementPlayer('player1', {
        features: ['playpause', 'progress'],
      });

      $('#delete-audio').on('click', function() {
        $('#record-audio').empty(); 
        document.getElementById("AudioData").value = "";
        document.getElementById('recorder').style.display = 'none';
        var menuBar1 = document.getElementById('menu-bar1');
        var menuBar2 = document.getElementById('menu-bar2');
        menuBar2.style.visibility = 'hidden';
        menuBar1.style.visibility = 'visible';
        document.getElementById('back-menu-bar').style.visibility = 'visible';
      });

      var reader = new FileReader();
      reader.onloadend = function() {
        base64Audio = reader.result.split(";")[1];
        document.getElementById("AudioData").value = base64Audio;
      };
      reader.readAsDataURL(blob);
    };

    var timeInterval = 360 * 1000;
    mediaRecorder.start(timeInterval);
    $('#stop-recording').disabled = false;
} 





  function onMediaError(e) {
    console.error('media error', e);
  }

  function bytesToSize(bytes) {
    var k = 1000;
    var sizes = ['Bytes', 'KB', 'MB', 'GB', 'TB'];
    if (bytes === 0) return '0 Bytes';
    var i = parseInt(Math.floor(Math.log(bytes) / Math.log(k)), 10);
    return (bytes / Math.pow(k, i)).toPrecision(3) + ' ' + sizes[i];
  }

  function getTimeLength(milliseconds) {
    var data = new Date(milliseconds);
    return data.getUTCHours() + " hours, " + data.getUTCMinutes() + " minutes and " + data.getUTCSeconds() + " second(s)";
  }

  window.onbeforeunload = function() {
    $('#start-recording').disabled = false;
  };


$(document).on('click','input[name="audio_record-icon"]',function(){
  var checked = $('#audio_record-icon').prop('checked');
  if(checked == true)
    {
        startRecording();
    }
  else
    {
        stopRecording();
    }
});


const slider = document.querySelector(".tempoSlider");
const sliderMax = slider.getAttribute("max");
const sliderThickFill = document.querySelector(".thick-fill");
const currentLeads = document.getElementById("tempo-disp");


function handleChange() {
  const leads = this.value;
  currentLeads.textContent = leads;
  const sliderLineWidth = leads / sliderMax * 100;
   var hue = 70 - (this.value / 200 * 70);
  sliderThickFill.style.backgroundColor = 'hsl(' + hue + ', 100%, 50%)';
  sliderThickFill.style.width = sliderLineWidth + "%";
}

slider.addEventListener("input", handleChange);





var audioCtx = new (window.AudioContext || window.webkitAudioContext)(),
    SubAudioCtx = new (window.AudioContext || window.webkitAudioContext)(),
    volume = audioCtx.createGain(),
    subvolume = SubAudioCtx.createGain(),
    noteFlag = 0,
    curtime = 0.0,
    timer,
    delta = 0;


// Elements INIT
var tempo = 60000 / (document.getElementById('tempo').value),
    
    tempo_rge = document.getElementById('tempo'),
    tempo_disp = document.getElementById('tempo-disp'),
    firstBeating = document.getElementById('checkBox'),
    plus = document.getElementById('plus'),
    minus = document.getElementById('minus'),
    extraPlus = document.getElementById('extraPlus'),
    extraMinus = document.getElementById('extraMinus'),
    beatPlus = document.getElementById('beatPlus'),
    beatMinus = document.getElementById('beatMinus'),
    start = document.getElementById('start'),
    stop = document.getElementById('stop'),
    close = document.getElementById('icon-x-close'), 
    tap = document.getElementById('tap'),
    beatFlag = document.getElementById('beatFlag'),
    beatNbr = document.getElementById('beatNbr'),
    beatCount = document.getElementById('beatCount'),
    digitalDisplayContainer = document.getElementById('digitalDisplayContainer'),  
    dotTarget = document.getElementById('dotTarget'),
    dotsDisplay = document.getElementById('dotsDisplay'),    
    digitalDisplay = document.getElementById('digitalDisplay'),
    bothDisplay = document.getElementById('bothDisplay'),
    beatDots = document.getElementsByClassName('beat'),
    semiquaver = document.getElementById('semiquaver');


function temp(v){
  tempo_disp.innerHTML = v;  
}

function vol(l){
  volume.gain.setValueAtTime(l, audioCtx.currentTime);
}

function schedule(){
  while(curtime < audioCtx.currentTime + 0.1){
    if(noteFlag >= beatCount.value){
      noteFlag = 0;
    }
    playNote(curtime); 

    
    console.log(curtime);
    console.log(curtime);
    
    updateTime();

    var child = document.querySelectorAll('#dotTarget li');      
    
    if(noteFlag === 0){
      child[noteFlag].className += " on-temp";
      child[child.length - 1].classList.remove("on-temp");
    }
    else{
      child[noteFlag].className += " on-temp";
      child[noteFlag - 1].classList.remove("on-temp");
    }
    beatFlag.innerHTML = noteFlag+1;
    noteFlag++;
  }
  timer = window.setTimeout(schedule, 0.1);
}

function updateTime(){
  curtime += 60.0 / parseInt(tempo_rge.value, 10);
}

function playNote(t){
  var note = audioCtx.createOscillator();
  note.connect(volume);
  volume.connect(audioCtx.destination);


 
var now = audioCtx.currentTime;
var attackTime = .1;
var releaseTime = 0.01;

volume.gain.setValueAtTime(0, now);
volume.gain.linearRampToValueAtTime(2, now + attackTime);
volume.gain.linearRampToValueAtTime(0, now + attackTime + releaseTime);

note.frequency.setValueAtTime(800, audioCtx.currentTime);  

/*  if(firstBeating.checked){
    if(noteFlag == 0){
      note.frequency.setValueAtTime(1600, audioCtx.currentTime);    
    }
    else{
      for(var i=0; i < beatDots.length; i++){    
        if(beatDots[noteFlag].className == "beat active"){
            note.frequency.setValueAtTime(800, audioCtx.currentTime);
           }
        else{
           note.frequency.setValueAtTime(400, audioCtx.currentTime);       
        }
      } 
    }
  }  
  else{
      for(var i=0; i < beatDots.length; i++){    
        if(beatDots[noteFlag].className == "beat active"){
          note.frequency.setValueAtTime(800, audioCtx.currentTime);
        }
        else{
          note.frequency.setValueAtTime(400, audioCtx.currentTime);       
        }
      } 
    }*/
  
  note.start(t);
  note.stop(t + 0.04);  
}

function playSubNote(nt){
  var subnote = SubAudioCtx.createOscillator();
  
  subvolume.connect(SubAudioCtx.destination);
  subvolume.gain.setValueAtTime(0.2, SubAudioCtx.currentTime);   
  
  subnote.connect(subvolume);
  subnote.type = 'sine';
  subnote.frequency.setValueAtTime(400, SubAudioCtx.currentTime);  
  
  subnote.start(nt);
  subnote.stop(nt + 0.04); 
}

function clickDots(){
  for(u = 0; u < beatDots.length; u++){
    beatDots[u].addEventListener('click', function(){
      if(this.className === "beat active"){
         this.className = "beat";
      }
      else{
        this.className += " active";     
      }
    });
  }  
}
clickDots()

start.addEventListener('click', function(){
  curtime = audioCtx.currentTime;
  schedule(); 
  this.style.display = "none";
  stop.style.display = "block";
});

stop.addEventListener('click', function(){
  window.clearInterval(timer);
  noteFlag = 0;
  beatFlag.innerHTML = 1;
  for(u = 0; u < beatDots.length; u++){
    beatDots[u].classList.remove("on-temp");
  }

  this.style.display = "none";
  start.style.display = "block";
});

close.addEventListener('click', function(){
  window.clearInterval(timer);
  noteFlag = 0;
  beatFlag.innerHTML = 1;
  for(u = 0; u < beatDots.length; u++){
    beatDots[u].classList.remove("on-temp");
  }
  stop.style.display = "none";
  start.style.display = "block";

});

tap.addEventListener('click', function(){
  var d = new Date();
  var temp = d.getTime();
  
  var tap_temp = Math.ceil(60000 / (temp - delta));
  
  tempo_disp.innerHTML = tap_temp; 
  tempo_rge.value = tap_temp;
  delta = temp;
  
  if(tap_temp > 240){
    tempo_disp.innerHTML = 240;
    tempo_rge.value = 240;
  } 
});

plus.addEventListener('click', function(){
    tempo_rge.value +++ 1;
    tempo_disp.innerHTML = tempo_rge.value;
});

extraPlus.addEventListener('click', function(){
    tempo_rge.value = tempo_rge.value +++ 5;
    tempo_disp.innerHTML = tempo_rge.value;
});

beatPlus.addEventListener('click', function(){
    beatCount.value = beatCount.value +++ 1;
    if( beatCount.value > 12){
      beatCount.value = 12;
    }
    beatNbr.innerHTML =  "/"+beatCount.value;
    var i = 0,
    target = document.getElementById('dotTarget');
    target.innerHTML = "";
    while(i < beatCount.value){
      var dot = document.createElement("li");
      dot.className = "beat";  
      target.append(dot);  
      i++;
    }
    clickDots()
});

minus.addEventListener('click', function(){
    tempo_rge.value --- 1;
    tempo_disp.innerHTML = tempo_rge.value;
});

extraMinus.addEventListener('click', function(){
    tempo_rge.value = tempo_rge.value --- 5;
    tempo_disp.innerHTML = tempo_rge.value;
});

beatMinus.addEventListener('click', function(){
    beatCount.value = beatCount.value --- 1;
    if( beatCount.value < 1){
      beatCount.value = 1;
    }
    beatNbr.innerHTML =  "/"+beatCount.value;
    var i = 0,
    target = document.getElementById('dotTarget');
    target.innerHTML = "";
    while(i < beatCount.value){
      var dot = document.createElement("li");
      dot.className = "beat";  
      target.append(dot);  
      i++;
    }
    clickDots();
});


dotsDisplay.addEventListener('click', function(){
    dotsDisplay.className = 'header-btn button-active';
    if(digitalDisplay.className == 'header-btn button-active' || bothDisplay.className == 'header-btn button-active'){
      digitalDisplay.classList.remove('button-active');
      bothDisplay.classList.remove('button-active');
    }
    dotTarget.style.display = 'flex';
    digitalDisplayContainer.style.display = 'none';
});



digitalDisplay.addEventListener('click', function(){
    digitalDisplay.className = 'header-btn button-active';
    if(dotsDisplay.className == 'header-btn button-active' || bothDisplay.className == 'header-btn button-active'){
      dotsDisplay.classList.remove('button-active');
      bothDisplay.classList.remove('button-active');
    }
    digitalDisplayContainer.style.display = 'flex';
    dotTarget.style.display = 'none';
});

bothDisplay.addEventListener('click', function(){
    bothDisplay.className = 'header-btn button-active';
    if(dotsDisplay.className == 'header-btn button-active' || digitalDisplay.className == 'header-btn button-active'){
      dotsDisplay.classList.remove('button-active');
      digitalDisplay.classList.remove('button-active');
    }
    dotTarget.style.display = 'flex';
    digitalDisplayContainer.style.display = 'flex';
});


  setInterval(function() {
    location.reload(); 
}, 60000); 
</script>
  
   
